"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.cognitoChangePassword = cognitoChangePassword;
const client_cognito_identity_provider_1 = require("@aws-sdk/client-cognito-identity-provider");
async function cognitoChangePassword(accessToken, prevPassword, newPassword, newPasswordConfirm, config) {
    if (newPassword !== newPasswordConfirm) {
        throw new Error("New password validation does not match");
    }
    const cognito = new client_cognito_identity_provider_1.CognitoIdentityProviderClient({
        region: config.awsRegion,
    });
    const validateEmailCommand = new client_cognito_identity_provider_1.ChangePasswordCommand({
        AccessToken: accessToken,
        PreviousPassword: prevPassword,
        ProposedPassword: newPassword,
    });
    await cognito.send(validateEmailCommand);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29nbml0by1jaGFuZ2UtcGFzc3dvcmQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvYWN0aW9ucy9jb2duaXRvLWNoYW5nZS1wYXNzd29yZC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQU1BLHNEQXFCQztBQTNCRCxnR0FHbUQ7QUFHNUMsS0FBSyxVQUFVLHFCQUFxQixDQUN6QyxXQUFtQixFQUNuQixZQUFvQixFQUNwQixXQUFtQixFQUNuQixrQkFBMEIsRUFDMUIsTUFBYztJQUVkLElBQUksV0FBVyxLQUFLLGtCQUFrQixFQUFFLENBQUM7UUFDdkMsTUFBTSxJQUFJLEtBQUssQ0FBQyx3Q0FBd0MsQ0FBQyxDQUFDO0lBQzVELENBQUM7SUFDRCxNQUFNLE9BQU8sR0FBRyxJQUFJLGdFQUE2QixDQUFDO1FBQ2hELE1BQU0sRUFBRSxNQUFNLENBQUMsU0FBUztLQUN6QixDQUFDLENBQUM7SUFFSCxNQUFNLG9CQUFvQixHQUFHLElBQUksd0RBQXFCLENBQUM7UUFDckQsV0FBVyxFQUFFLFdBQVc7UUFDeEIsZ0JBQWdCLEVBQUUsWUFBWTtRQUM5QixnQkFBZ0IsRUFBRSxXQUFXO0tBQzlCLENBQUMsQ0FBQztJQUVILE1BQU0sT0FBTyxDQUFDLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDO0FBQzNDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBDb2duaXRvSWRlbnRpdHlQcm92aWRlckNsaWVudCxcbiAgQ2hhbmdlUGFzc3dvcmRDb21tYW5kLFxufSBmcm9tIFwiQGF3cy1zZGsvY2xpZW50LWNvZ25pdG8taWRlbnRpdHktcHJvdmlkZXJcIjtcbmltcG9ydCB7IENvbmZpZyB9IGZyb20gXCIuLi90eXBlc1wiO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY29nbml0b0NoYW5nZVBhc3N3b3JkKFxuICBhY2Nlc3NUb2tlbjogc3RyaW5nLFxuICBwcmV2UGFzc3dvcmQ6IHN0cmluZyxcbiAgbmV3UGFzc3dvcmQ6IHN0cmluZyxcbiAgbmV3UGFzc3dvcmRDb25maXJtOiBzdHJpbmcsXG4gIGNvbmZpZzogQ29uZmlnLFxuKTogUHJvbWlzZTx2b2lkPiB7XG4gIGlmIChuZXdQYXNzd29yZCAhPT0gbmV3UGFzc3dvcmRDb25maXJtKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiTmV3IHBhc3N3b3JkIHZhbGlkYXRpb24gZG9lcyBub3QgbWF0Y2hcIik7XG4gIH1cbiAgY29uc3QgY29nbml0byA9IG5ldyBDb2duaXRvSWRlbnRpdHlQcm92aWRlckNsaWVudCh7XG4gICAgcmVnaW9uOiBjb25maWcuYXdzUmVnaW9uLFxuICB9KTtcblxuICBjb25zdCB2YWxpZGF0ZUVtYWlsQ29tbWFuZCA9IG5ldyBDaGFuZ2VQYXNzd29yZENvbW1hbmQoe1xuICAgIEFjY2Vzc1Rva2VuOiBhY2Nlc3NUb2tlbixcbiAgICBQcmV2aW91c1Bhc3N3b3JkOiBwcmV2UGFzc3dvcmQsXG4gICAgUHJvcG9zZWRQYXNzd29yZDogbmV3UGFzc3dvcmQsXG4gIH0pO1xuXG4gIGF3YWl0IGNvZ25pdG8uc2VuZCh2YWxpZGF0ZUVtYWlsQ29tbWFuZCk7XG59XG4iXX0=